
Installation of GLOBAL

						17-Sep-1999 Shigio Yamaguchi
---------------------------------------------------------------------------
Guide line (C style)
---------------------------------------------------------------------------

if (Your system == FreeBSD) {
	You are lucky!
	You need not to do procedure "1. Preparation for generic UNIX".

	if (version >= 2.2.2) {
		Your system already includes GLOBAL.
		You can overwrite it with this package.
	} else {
		There is no problem.
	}
} else if (Your system == NetBSD) {
	You are lucky!
	You need not to do procedure "1. Preparation for generic UNIX".

	if (version >= 1.4) {
		Your system already includes GLOBAL in your packages.
		You can overwrite it with this package.
	} else if (version == 1.3.2) {
		These is no problem.
		You can use nvi-1.66.diff for native nvi.
	} else {
		I don't know but it seems no problem.
	}
} else if (Your system == Debian GNU linux) {
	You are lucky!
	You can skip most of "1. Preparation for generic UNIX" except for
   	"a) Generic makefile".(It's very easy.)

	if (version >= potato) {
		Your system already includes GLOBAL in your packages.
		You can overwrite it with this package.
	} else if (version == 1.3.1) {
		There is no problem.
	} else {
		I don't know but it seems no problem.
	}
} else if (Your system == WIN32 (Windows95, WindowsNT 4.0)) {
	if (You have Borland C++ compiler) {
		Please go to win32/ directory and read README.
	} else if (You are willing to use cygwin tools) {
		There is no problem but some notice. I wrote cygwin specific
		issure below.
	} else {
		I don't know but files in win32/ directory will be good
		sample for you.
	}
} else {
	You may some error messages to make GLOBAL.
	But it seems not so difficult to clear it. If you make a patch for it,
	please let me know. I would like to include your patch into new
	version of GLOBAL.

	Thank you in advance.
}

----------------------------------------------------------------------------
Install procedure
----------------------------------------------------------------------------

0. Extracting

	% tar xzvf global-XXX.tar.gz
	% cd global-XXX

	(XXX is version number.)

1. Preparation for generic UNIX

   If you are a user of FreeBSD or NetBSD then nothing to do here.
   Please go to "2. GLOBAL basic". Else if you are a user of Borland
   compiler, then goto win32/ directory and read README.

   Otherwise, you must check following items before you install GLOBAL.

   If you are willing to use cygwin tools in WIN32 environment then you must
   install it at first and set path so that cygwin tool will be executed.
   You can get it at:

	http://sourceware.cygnus.com/

   a) Generic makefile (necessary)

      This package includes generic makefile. Please do the followings.

	% make -f Makefile.generic gen
	% vi Makefile		<- check variables DESTDIR, LIB...

      If you use cygwin tools then you must append --unix option like this.

	% make --unix -f Makefile.generic gen

   b) Some UNIX tools (necessary)

      sed(1), sort(1) and env(1) are needed.
      If your environment is UNIX, you have them. You can confirm it like this.

	[csh]
	% which sed
	/usr/bin/sed
	%

	[bash]
	$ type sed
	sed is /usr/bin/sed
	$

   c) PERL version 4 or later (needed for htags)

      If you don't have it, you can fetch it from this site.

	http://www.perl.com/CPAN/

      If you use cygwin tools then you can get it at:

	http://www.activestate.com/

   d) Rewrite some files (needed for htags)

      If you install GLOBAL into other than /usr/bin, you need rewrite
      hard coded path in a program. You can find the place by this command.

	% grep '/usr/bin/' */*.pl

      If your env(1) command's path isn't '/usr/bin/env' then you must
      rewrite perl script or copy env to /usr/bin. You can find the place by
      this command.

	% grep '/usr/bin/env' */*.pl

   e) Groff (needed for formatting online manuals)

      Online manuals in GLOBAL are written with 'mandoc' macro which is a part
      of GNU groff package. See following site:

	http://www.gnu.org/order/ftp.html

      You can format these manuals by following command line manually.

	% groff -Wall -Tascii -mandoc global.1

      If you replace your system's nroff(1) with GNU's one(nroff.sh) then
      you can use man(1) to see GLOBAL's online manuals.

2. GLOBAL basic (NEEDED)

   	% make
   	# make install

   If you use cygwin tools then use --unix option and cygwin_install.

	$ make --unix
	$ make --unix cygwin_install

   If some errors occured in libdb/ or libregex/ then you had better to
   modify 'machine/compat.h' and retry.

3. Extended nvi (OPTIONAL)

   If you use FreeBSD 2.2.2R(or later) or NetBSD 1.4(or later), your nvi is
   already extended nvi.
   Otherwise, please get nvi-1.79 at:

	   http://www.bostic.com/vi/

   and do the followings.

	% tar xzvf nvi-1.79.tar.gz
	% cd nvi-1.79
	% patch -p < ../nvi-1.79.diff
	% cd build
	% ./configure
	% make
	# make install

   The patch for nvi-1.66 is also available for NetBSD 1.3.2 users.

4. Extended emacs (OPTIONAL)

   Global supports GNU Emacs and XEmacs. If you meet trouble, please tell me.

   You can get them at:

	GNU emacs:
		http://www.gnu.org
	XEmacs:
		http://www.xemacs.org

   If you have installed it then copy gtags.el in this package to the emacs
   lisp library directory or place the file in a directory
   (for example "~/lisp") and write $HOME/.emacs like this.

	+-----------------------------------------------
	|(setq load-path (cons "~/lisp" load-path))

5. Elvis (OPTIONAL)

   You need Elvis 2.1 or later. You can get it at:

	http://www.fh-wedel.de/elvis/

   You need not any patch for it.


6. Gozilla (OPTIONAL)

   You need X(1) to install gozilla.
   After building basic GLOBAL then

	% cd gozilla
	% xmkmf
	% make
	# make install
	# make install.man

7. other parser (OPTIONAL)

   If you want to use other tag command like etags (tag command for emacs)
   as a parser, you need to write global.conf (or $HOME/.globalrc).

   Sample gtags.conf has etags's entry. Try this.


   a) Install parser.

	% cd <emacs's source directory>/lib-src
	% make ctags
	...
	# cp ctags /usr/local/bin/ctags-emacs

   b) Select ctags-emacs for GLOBAL system.

	% setenv GTAGSLABEL ctags-emacs

	or

	+------------------------------------------------
	|default:\		<== gtags use 'default' entry by default.
	|	:tc=ctags-emacs:tc=htags:

Good luck!
---------------------------------------------------------------------------
Additional comment for mainly BSD system.
---------------------------------------------------------------------------
If your system is *BSD then you have db(3) and regex(3) in libc.
So you need not make libdb/ and libregex/.

The following modifications will suppress making them and make executables
smaller because they use libc.so instead of libdb and libregex.

[Makefile]

        SUBDIR= libdb libutil global gtags gctags btreeop htags
                |
                v
        SUBDIR= libutil global gtags gctags btreeop htags

[Makefile.inc]

        LDADD=          -lgloutil -lglodb
                |
                v
        LDADD=          -lgloutil

And you can do this.

        % rm -rf libdb libregex
        % make
